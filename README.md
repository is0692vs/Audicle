# Audicle

Audicle（Article + Audio）は、ウェブページ上の記事コンテンツを音声で読み上げるプラットフォームです。

快適な「ながら読書」体験を提供します。

## プロダクトラインナップ

Audicleは、利用スタイルに合わせて選べる3つの形態で提供されています。

### 1. Vercelホスティング版（招待制）

最も手軽に始められる、クラウド版のWebアプリケーションです。

- **特徴**:
  - アカウント作成やサーバー設定が不要
  - 最新の機能をすぐに利用可能
  - 高品質な音声を安定して提供
- **アクセス**:
  - 現在、招待制で運用しています。利用をご希望の方はお問い合わせください。

### 2. セルフホストWebアプリケーション

ご自身のサーバー環境でAudicleを運用したい方向けのバージョンです。

- **特徴**:
  - 全ての機能を自由にカスタマイズ可能
  - 外部サービスへの依存が少ない
  - Docker Composeで簡単にデプロイ可能
- **セットアップ**:
  - `packages/web-app` および `packages/api-server` を参照してください。

### 3. Chrome拡張機能

ブラウザに直接インストールして、閲覧中の記事をその場で読み上げるための拡張機能です。

- **特徴**:
  - Webサイトを離れることなく、ワンクリックで読み上げを開始
  - シンプルで直感的な操作
- **インストール**:
  - `packages/chrome-extension` を参照し、デベロッパーモードで読み込んでください。

## 主な機能

- **ワンクリック再生**: 読みたい段落をクリックするだけで再生が開始されます
- **インテリジェントな本文抽出**: 広告などを除去し、本文のみを抽出
- **再生箇所のハイライト**: どこを読んでいるかが一目でわかります
- **複数TTSエンジン対応**: 用途に応じて音声合成エンジンを選択可能

## 技術スタック

本プロジェクトは、以下の技術スタックで構築されています。

- **`api-server` (バックエンド)**
  - **フレームワーク**: FastAPI (Python)
  - **TTSエンジン**: Google Cloud Text-to-Speech
  - **デプロイ**: Docker

- **`web-app` / `web-app-vercel` (フロントエンド)**
  - **フレームワーク**: Next.js, React
  - **言語**: TypeScript
  - **UI**: Tailwind CSS
  - **テスト**: Jest, Playwright
  - **データベース**: Supabase (Vercel版)

- **`chrome-extension` (ブラウザ拡張機能)**
  - **言語**: JavaScript
  - **ライブラリ**: Mozilla Readability.js

## アーキテクチャ概要

Audicleは、モノリポ構成の複数のパッケージから成り立っています。

```
/packages
├── api-server/        # 音声合成を行うAPIサーバー
├── chrome-extension/  # ブラウザ拡張機能
├── db/                # データベーススキーマ
└── web-app/           # セルフホスト用Webアプリ
└── web-app-vercel/    # Vercelホスティング版Webアプリ
```

- **`chrome-extension`** は、閲覧中のページの本文を抽出し、**`api-server`** に送信して音声データを受け取ります。
- **`web-app`** は、指定されたURLの記事をサーバーサイドで取得・解析し、音声合成を行います。セルフホスト版はこちらを利用します。
- **`web-app-vercel`** は、Vercelでのホスティングに最適化されており、ユーザー認証やデータベース連携機能が追加されています。

## APIエンドポイントの例

セルフホスト版の`api-server`は、以下のエンドポイントを提供します。

### テキストを音声合成する

```bash
curl -X POST "http://localhost:8001/synthesize/simple" \
-H "Content-Type: application/json" \
-d '{"text": "これはテストです"}' \
--output test.mp3
```

成功すると、`test.mp3`というファイル名で音声データが保存されます。

## トラブルシューティング

### `api-server`が起動しない

- **問題**: `docker-compose up` を実行しても、コンテナが正常に起動しない。
- **解決策**:
  - `packages/api-server/credentials` ディレクトリに、Google Cloudの認証情報ファイル (`credentials.json`) が正しく配置されているか確認してください。
  - Dockerが正常に動作しているか確認してください。

### Chrome拡張機能が動作しない

- **問題**: 拡張機能のアイコンをクリックしても反応がない、または読み上げが開始されない。
- **解決策**:
  - `api-server`が正しく起動しているか確認してください。
  - 拡張機能の設定で、APIサーバーのURLが正しく設定されているか確認してください (`http://localhost:8001`)。
  - デベロッパーツールのコンソールにエラーメッセージが表示されていないか確認してください。

## ライセンス

本プロジェクトはMITライセンスです。詳細は[LICENSE](LICENSE)ファイルをご覧ください。
